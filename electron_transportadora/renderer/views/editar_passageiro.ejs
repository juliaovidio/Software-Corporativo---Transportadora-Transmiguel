<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/css/editar_passageiro.css">
  <title>Passageiros</title>
</head>
<body>
  <!-- Menu lateral -->
  <%- include('partials/menu_lateral') %>

  <main class="main-content">
    <h1 class="titulo">Editar Passageiro</h1>

    <form action="/passageiro/editar/<%= passageiro.idPassageiro %>" method="POST" class="form-passageiro">
      <div class="campo-linha">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" value="<%= passageiro.nome %>" required>
      </div>

      <div class="campo-linha">
        <label for="telefone">Telefone:</label>
        <input type="text" id="telefone" name="telefone" value="<%= passageiro.telefone %>" required>
      </div>

      <div class="campo-linha">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="<%= passageiro.email %>" required>
      </div>

      <div class="campo-linha">
        <label for="endereco">Endereço completo:</label>
        <input type="text" id="endereco" name="endereco" value="<%= passageiro.endereco %>">
      </div>

      <div class="campo-linha">
        <label for="bairro">Bairro:</label>
        <input type="text" id="bairro" name="bairro" value="<%= passageiro.bairro %>">
      </div>

      <div class="campo-linha">
        <label for="cidade">Cidade/Estado:</label>
        <input type="text" id="cidade" name="cidade" value="<%= passageiro.cidade %>">
      </div>

      <div class="campo-linha">
        <label for="tipo">Tipo de Pessoa:</label>
        <select id="tipo" name="tipo" required>
          <option value="">Selecione...</option>
          <option value="fisica" <%= passageiro.tipo === 'fisica' ? 'selected' : '' %>>Física</option>
          <option value="juridica" <%= passageiro.tipo === 'juridica' ? 'selected' : '' %>>Jurídica</option>
        </select>
      </div>

      <div class="campo-linha" id="campo-cpf" styles="<%= passageiro.tipo === 'fisica' ? '' : 'display:none;' %>">
        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" name="cpf" value="<%= passageiro.cpf %>">
      </div>

      <div class="campo-linha" id="campo-cnpj" styles="<%= passageiro.tipo === 'juridica' ? '' : 'display:none;' %>">
        <label for="cnpj">CNPJ:</label>
        <input type="text" id="cnpj" name="cnpj" value="<%= passageiro.cnpj %>">
      </div>

      <div class="campo-linha">
        <label for="valor_mensal">Valor mensal:</label>
        <input type="number" id="valor_mensal" name="valor_mensal" step="0.01" value="<%= passageiro.valor_mensal %>">
      </div>

      <div class="campo-linha">
        <label for="status">Status:</label>
        <input type="text" id="status" name="status" value="<%= passageiro.status %>">
      </div>

      <div class="campo-linha">
        <label for="trajetos_idTrajetos">Trajeto:</label>
        <input list="trajetos" id="trajetos_idTrajetos" name="trajetos_idTrajetos"
               value="<%= passageiro.trajetos_idTrajetos %> - <%= trajetos.find(t => t.idTrajetos === passageiro.trajetos_idTrajetos)?.descricao || '' %>"
               placeholder="Digite a descrição do trajeto">
        <datalist id="trajetos">
          <% trajetos.forEach(trajeto => { %>
            <option value="<%= trajeto.idTrajetos %> - <%= trajeto.descricao %>"></option>
          <% }); %>
        </datalist>
      </div>

      <div class="botoes">
        <button type="submit" class="btn-salvar">Salvar Alterações</button>
        <a href="/passageiro" class="btn-voltar">Voltar</a>
      </div>
    </form>
  </main>
    <script src="../js/editar_passageiro.js"></script>
</body>
</html>
